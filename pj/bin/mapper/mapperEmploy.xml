<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.mapperEmploy">
    <select id="selectAll" resultType="ModelEmploy">
        select * from pj_employ
    </select>
    
        
    <select id="getEmployTotalRecord" resultType="int" parameterType="String">
       SELECT count(*) FROM pj_employ       
           where 1=1                      
                 AND ( jobname LIKE CONCAT('%',#{searchWord}, '%') OR jobtitle LIKE CONCAT('%', #{searchWord}, '%') );
    </select>
    
    
    <select id="getEmployList" parameterType="java.util.Map" resultType="ModelEmploy">
        SELECT jobname, jobtitle, empexpiry, period, jobtitleinfo
        FROM (
            SELECT @RNUM := @RNUM + 1 AS r, a.* 
            FROM (
                    SELECT  
                           a.jobname, 
                           a.jobtitle, 
                           a.empexpiry,
                           a.period,
                           a.jobtitleinfo
                    FROM 
                        pj_employ a
                      WHERE
                        1 = 1
                    GROUP BY a.jobname,a.jobtitle, a.empexpiry, a.period, a.jobtitleinfo
                    ORDER BY jobname DESC
                 ) a, (SELECT @RNUM:=0) b
            ) temp
        WHERE r BETWEEN #{start} AND #{end}
    </select>  
    <select id="getEmployjobtitle" resultType="String" parameterType="String">
      select jobname, jobtitle, empexpiry ,period from pj_employ
    </select>
    
    <select id="getEmployjobname" resultType="ModelEmploy" parameterType="java.util.Map">
      select jobname, jobtitle, empexpiry, period from pj_employ where jobname like CONCAT ('%',#{searchWord}, '%') ;
    </select>
    
    <insert id="insertEmploy" parameterType="ModelEmploy"  >
        INSERT INTO 
        pj_employ  (     jobname   , jobtitle   , period   , empexpiry  ,jobtitleinfo,useYN  )
            VALUES     (  #{jobname}, #{jobtitle}, #{period}, #{empexpiry} , #{jobtitleinfo} , #{useYN}  )
    </insert>   
    
 </mapper>
